<!DOCTYPE html>
<html>
   <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8; lang="en"/>
	 <!--
	    Ruth Murphy
	    September 29, 2016
	    Project 2 v1
          -->
      <title> Murphy's World </title>
	   <p style = "font-size: 30pt; color: red;"> Welcome to Murphy's World!</p>
	   <body>
	     <p style = "font-size: 15pt; color: blue;">
		   <a href= mailto:ruth.murphy1@marist.edu> Send bug reports to Ruth Murphy</a> </p>

      <script type="text/javascript">
         //
         // Global Variables
         //         
         var currentLoc = 0;
         var score = 0;
         var directionErrorCount = 0;
         var limit = 5;
         
         var beenHere0 = false;
         var beenHere1 = false;
         var beenHere2 = false;
         var beenHere3 = false;
         var beenHere4 = false;
                  
         //
         // Initialization
         //
         function init() {
            look();
         }
         
         //
         // Directional Button Event Handlers
         //         
         function btnGo_North_click() {
            if (currentLoc === 0) {
               currentLoc = 1;
               look();               
            } else {
              if (currentLoc === 3) {
                 currentLoc = 0;
                 look();            
              } else {
                 directionError(); 
              }
            }            
         }

         function btnGo_South_click() {
            if (currentLoc === 1) {
               currentLoc = 0;
               look();
            } else {
              if (currentLoc === 0) {
                 currentLoc = 3;
                 look();
              } else {
                 directionError(); 
              }
            }
         }

         function btnGo_East_click() {
            if (currentLoc === 4) {
               currentLoc = 0;
               look();
            } else {
              if (currentLoc === 0) {
                 currentLoc = 2;
                 look();
              } else {
                 directionError(); 
              }
            }
         }

         function btnGo_West_click() {
            if (currentLoc === 2) {
               currentLoc = 0;
               look();
            } else {
              if (currentLoc === 0) {
                 currentLoc = 4;
                 look();
              } else {
                 directionError(); 
              }
            }
         }
                  
         //
         // Story / Locale Functions
         //
         function look() {
            var desc = "";
            switch(currentLoc) {
               case 0: desc = "0. Welcome to Dante's Cave!";
                       break;
               case 1: desc = "1. You hve entered a very long tunnel";
                       break; 
               case 2: desc = "2. You enter a room with a door.";
                       break;
               case 3: desc = "3. You are in a room with a dirt floor and a table.  On the table is am odd key.";
                       break;
               case 4: desc = "4. You have desended some stairs";
                       break;
               default: desc = "You face a wall and can go no further";
            }
            checkScore();
            desc = desc + "\n" + "Score: " + score ;
            displayMessage(desc);
         }

         function directionError() {
            directionErrorCount = directionErrorCount + 1;
            if (directionErrorCount < limit) {
               displayMessage("You might want to try another direction.");
            } else {
               displayMessage("Umm, Where are you going?");
            }            
         }

         function ckScore() {
            if (! beenHere0) {            
               if (currentLoc === 0) {
                  score = score + 5;
                  beenHere0 = true;
               }
            } else if ( (! beenHere1) && (currentLoc === 1) ) {            
                  score = score + 5;
                  beenHere1 = true;
            } else if ( (! beenHere2) && (currentLoc === 2) ) {            
                  score = score + 5;
                  beenHere2 = true;
            } else if ( (! beenHere3) && (currentLoc === 3) ) {            
                  score = score + 5;
                  beenHere3 = true;
            } else if ( (! beenHere4) && (currentLoc === 4) ) {            
                  score = score + 5;
                  beenHere4 = true;
            }            
         }

         //
         // Utility Function(s)
         //
         function displayMessage(msg) {
            var target = document.getElementById("taMain");
            target.value = msg + "\n\n" + target.value;
         }
      </script>
   </head>
   <body onload="init();">
       <textarea id="taMain" rows="8" cols="32"></textarea>
       
       <br>
       Command:       
       <input type="text" 
              id = "txtCommand"
              name="txtCommand">

       <input type="button"
              value="Go" 
              onclick="btnGo_click();" />                           
       
       <br>
       <input type="button" 
              value="Go North"
              onclick="btnGo_North_click();">
       <input type="button" 
              value="Go South"
              onclick="btnGo_South_click();">
       <input type="button" 
              value="Go East"
              onclick="btnGo_East_click();">
       <input type="button" 
              value="Go West"
              onclick="btnGo_West_click();">
              
      </body>

</html>